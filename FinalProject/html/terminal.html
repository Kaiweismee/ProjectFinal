<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartSort AI｜絕對置中修正版</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

  <style>
    :root {
      --color-metal: #f97316;   
      --color-plastic: #ef4444; 
      --color-paper: #3b82f6;   
      --color-glass: #22c55e;   
      --color-general: #334155; 

      --bg-default: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
      --text-main: #1e293b;
    }

    body {
      margin: 0;
      font-family: "Noto Sans TC", sans-serif;
      background: #111;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    /* 橫向平板外框 */
    .tablet-frame {
      width: 90vw;
      max-width: 900px;
      height: 60vh;
      max-height: 550px;
      background: #000;
      border-radius: 35px;
      padding: 15px;
      box-shadow: 0 0 50px rgba(0,0,0,0.8);
      position: relative;
    }

    .screen {
      width: 100%;
      height: 100%;
      background: var(--bg-default);
      border-radius: 25px;
      position: relative;
      overflow: hidden;
      /* 移除 flex 佈局，改用絕對定位管理 */
      transition: background 0.5s ease;
    }

    .header {
      position: absolute;
      top: 0; left: 0; width: 100%;
      padding: 25px 35px;
      display: flex;
      justify-content: space-between;
      color: rgba(0,0,0,0.5);
      font-weight: bold;
      font-size: 14px;
      box-sizing: border-box;
      z-index: 10;
      pointer-events: none; /* 讓點擊可以穿透 Header */
    }

    /* --- 核心修正：絕對置中錨點 --- */
    /* 這是一個看不見的 0x0 點，位於螢幕正中央 */
    .center-anchor {
      position: absolute;
      top: 35%;
      left: 50%;
      width: 0;
      height: 0;
      z-index: 5;
      /* 不設定 transform，讓這裡成為座標原點 (0,0) */
    }

    /* 掃描圓圈：自身中心對準錨點 */
    .radar-scan {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      border: 2px solid #cbd5e1;
      position: absolute;
      /* 讓圓圈的中心點對齊父層的 (0,0) */
      top: 0; left: 0;
      transform: translate(-50%, -50%); 
      
      background: white;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    
    .radar-scan::after {
      content: '';
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(180deg, rgba(59, 130, 246, 0) 50%, rgba(59, 130, 246, 0.2) 100%);
      border-bottom: 2px solid #3b82f6;
      animation: scan 1.8s linear infinite;
    }
    @keyframes scan { 0% { transform: translateY(-100%); } 100% { transform: translateY(100%); } }

    /* 文字區塊：掛在圓圈下方 */
    .text-block {
      position: absolute;
      top: 90px; /* 距離中心點往下 90px (圓圈半徑70 + 間距20) */
      left: 0;
      transform: translateX(-50%); /* 水平置中 */
      text-align: center;
      width: 300px;
      pointer-events: none;
    }

    .headline {
      font-size: 32px;
      font-weight: 900;
      color: var(--text-main);
      margin: 0;
      letter-spacing: 1px;
    }

    .subtext {
      font-size: 16px;
      color: #64748b;
      margin-top: 8px;
    }

    /* --- 飛行物件 --- */
    #flying-item {
      position: absolute;
      /* 飛行起點：螢幕正中央 */
      top: 50%; 
      left: 50%;
      /* 初始狀態：完全置中 */
      transform: translate(-50%, -50%);
      font-size: 100px;
      z-index: 50;
      pointer-events: none;
      display: none; 
    }

    /* --- 底部回收桶 --- */
    .bins-container {
      position: absolute;
      bottom: 25px;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-evenly;
      padding: 0 50px;
      box-sizing: border-box;
      z-index: 10;
    }

    .bin-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      opacity: 0.6;
      transform: scale(0.9);
      transition: all 0.3s;
    }

    .bin-body {
      width: 60px;
      height: 75px;
      border-radius: 8px 8px 18px 18px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-weight: bold;
      font-size: 24px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      position: relative;
    }

    .bin-lid {
      width: 68px; height: 10px; border-radius: 4px; margin-bottom: 4px;
      transition: transform 0.2s;
    }

    .bin-label {
      font-size: 13px; margin-top: 8px; font-weight: bold; color: #64748b;
    }

    .bin-metal .bin-body, .bin-metal .bin-lid { background-color: var(--color-metal); }
    .bin-plastic .bin-body, .bin-plastic .bin-lid { background-color: var(--color-plastic); }
    .bin-paper .bin-body, .bin-paper .bin-lid { background-color: var(--color-paper); }
    .bin-glass .bin-body, .bin-glass .bin-lid { background-color: var(--color-glass); }
    .bin-general .bin-body, .bin-general .bin-lid { background-color: var(--color-general); }

    .bin-wrapper.ready { opacity: 1; transform: scale(1.1); }
    .bin-wrapper.ready .bin-lid { transform: translateY(-5px) rotate(-10deg); }
    .bin-wrapper.received { animation: wobble 0.5s ease-in-out; }
    
    @keyframes wobble {
      0%, 100% { transform: scale(1.1) rotate(0); }
      25% { transform: scale(1.1) rotate(-5deg); }
      50% { transform: scale(1.1) rotate(5deg); }
      75% { transform: scale(1.1) rotate(-5deg); }
    }

    /* 控制面板 */
    .controls {
      position: absolute; right: 20px; bottom: 20px;
      display: flex; flex-direction: column; gap: 8px;
    }
    .btn {
      padding: 10px 15px; border: none; border-radius: 8px;
      color: white; font-weight: bold; cursor: pointer;
      font-size: 12px; transition: 0.1s;
    }
    .btn:active { transform: scale(0.95); }

  </style>
</head>
<body>

  <div class="tablet-frame">
    <div class="screen" id="screen">
      
      <div class="header">
        <span>SmartSort AI</span>
        <span>LIVE</span>
      </div>

      <div class="center-anchor">
        
        <div id="state-scan">
          <div class="radar-scan"></div>
          
          <div class="text-block">
            <h1 class="headline">等待辨識中...</h1>
            <p class="subtext">請將物品置於鏡頭前</p>
          </div>
        </div>

        <div id="state-result" style="display:none;">
          <div class="text-block" style="top: 20px;"> <h1 class="headline" id="result-name"></h1>
            <p class="subtext">辨識成功！請看下方指引</p>
          </div>
        </div>

      </div>

      <span id="flying-item" class="material-icons-round">recycling</span>

      <div class="bins-container">
        <div class="bin-wrapper bin-plastic" id="bin-plastic">
          <div class="bin-lid"></div>
          <div class="bin-body"><span class="material-icons-round">local_drink</span></div>
          <div class="bin-label">塑膠</div>
        </div>
          <div class="bin-wrapper bin-metal" id="bin-metal">
          <div class="bin-lid"></div>
          <div class="bin-body"><span class="material-icons-round">settings</span></div>
          <div class="bin-label">金屬</div>
        </div>
        <div class="bin-wrapper bin-paper" id="bin-paper">
          <div class="bin-lid"></div>
          <div class="bin-body"><span class="material-icons-round">article</span></div>
          <div class="bin-label">紙類</div>
        </div>
        <div class="bin-wrapper bin-glass" id="bin-glass">
          <div class="bin-lid"></div>
          <div class="bin-body"><span class="material-icons-round">wine_bar</span></div>
          <div class="bin-label">玻璃</div>
        </div>
        <div class="bin-wrapper bin-general" id="bin-general">
          <div class="bin-lid"></div>
          <div class="bin-body"><span class="material-icons-round">delete</span></div>
          <div class="bin-label">一般</div>
        </div>
      </div>

    </div>
  </div>

  <div class="controls">
    <button class="btn" style="background:var(--color-metal)" onclick="startProcess('metal', '鐵鋁罐', 'settings')">投金屬</button>
    <button class="btn" style="background:var(--color-plastic)" onclick="startProcess('plastic', '寶特瓶', 'local_drink')">投塑膠</button>
    <button class="btn" style="background:var(--color-paper)" onclick="startProcess('paper', '紙便當盒', 'article')">投紙類</button>
    <button class="btn" style="background:var(--color-glass)" onclick="startProcess('glass', '玻璃瓶', 'wine_bar')">投玻璃</button>
    <button class="btn" style="background:var(--color-general)" onclick="startProcess('general', '髒衛生紙', 'delete')">投一般</button>
  </div>

  <script>
    const stateScan = document.getElementById('state-scan');
    const stateResult = document.getElementById('state-result');
    const resultName = document.getElementById('result-name');
    const flyingItem = document.getElementById('flying-item');
    const allBins = document.querySelectorAll('.bin-wrapper');

    const config = {
      metal:   { color: '#fff7ed', labelColor: '#c2410c' },
      plastic: { color: '#fef2f2', labelColor: '#b91c1c' },
      paper:   { color: '#eff6ff', labelColor: '#1d4ed8' },
      glass:   { color: '#f0fdf4', labelColor: '#15803d' },
      general: { color: '#f1f5f9', labelColor: '#334155' },
    };

    let isAnimating = false;

    function startProcess(type, name, iconName) {
      if (isAnimating) return;
      isAnimating = true;

      // 切換狀態
      stateScan.style.display = 'none';
      stateResult.style.display = 'block';
      resultName.innerText = name;
      resultName.style.color = config[type].labelColor;

      // 設定飛行物件
      flyingItem.innerText = iconName;
      flyingItem.style.color = config[type].labelColor;
      flyingItem.style.display = 'block';
      flyingItem.style.transition = 'none';
      
      // 重置位置：確保從螢幕正中心出發
      flyingItem.style.top = '50%';
      flyingItem.style.left = '50%';
      flyingItem.style.transform = 'translate(-50%, -50%) scale(1)';

      const targetBin = document.getElementById(`bin-${type}`);
      allBins.forEach(b => b.style.opacity = '0.3');
      targetBin.classList.add('ready');

      requestAnimationFrame(() => {
        setTimeout(() => {
          const binRect = targetBin.getBoundingClientRect();
          
          // 計算飛行軌跡：目標中心 - 視窗中心 (因為現在起點就是視窗中心)
          const moveX = binRect.left + (binRect.width / 2) - (window.innerWidth / 2);
          const moveY = binRect.top + (binRect.height / 2) - (window.innerHeight / 2);

          flyingItem.style.transition = 'transform 0.6s cubic-bezier(0.55, 0.055, 0.675, 0.19), opacity 0.6s ease';
          flyingItem.style.transform = `translate(calc(-50% + ${moveX}px), calc(-50% + ${moveY}px)) scale(0.2)`;
          flyingItem.style.opacity = '0';

          setTimeout(() => {
            targetBin.classList.remove('ready');
            targetBin.classList.add('received');
            setTimeout(() => { resetSystem(); }, 1000);
          }, 600);
        }, 100);
      });
    }

    function resetSystem() {
      isAnimating = false;
      stateScan.style.display = 'block';
      stateResult.style.display = 'none';
      flyingItem.style.display = 'none';
      flyingItem.style.opacity = '1';
      allBins.forEach(b => {
        b.style.opacity = '0.6';
        b.classList.remove('ready', 'received');
      });
    }
  </script>
</body>
</html>